\subsection{Technologien und Entscheidungen}




Aus den Anforderungen heraus wurde sich im Rahmen dieser Arbeit für diverse Technologien entschieden, welche eine Umsetzung der Anforderungen des Prototypen ermöglichen.
%Eine dieser Anforderungen ist es, die Funktionen über ein Smartphone zu nutzen. Um möglichst vielen Anwendern die %Möglichkeit der Nutzung zu geben, viel die Wahl auf Phonegap und Apache Cordova.

%TODO: Einleitung

Eine Hauptanforderungen für die Prototypische Umsetzung einer LBS Applikation ist 
die Lauffähigkeit auf einem Smartphone. Diese Anforderung fällt nicht weiter auf, 
ist aber entscheidend für die Auswahl der zu nutzenden Technologien.

Möchte man eine Applikation für Smartphones entwickeln muss sich erst Gedanken 
darüber gemacht werden, welche Smartphones bzw. mobile Betriebssystem unterstützt 
werden sollen.

Unterschieden wird meist nur zwischen drei Betriebssystemen, da diese die größten 
Marktanteile in Deutschland besitzen. 

\includegraphics[width=1\textwidth]{ref/images/marktanteil.jpg} 


Es handelt sich um folgende Betriebssysteme: 
\begin{description}
  \item[$\bullet$] Android
  \item[$\bullet$] iOS
  \item[$\bullet$] Windows
\end{description}


Um den implementier Aufwand geringer zu halten, wurde entschieden, die Applikation 
soll auf den zwei Betriebssystemen mit dem meisten Marktanteil lauffähig sein. 
Android und iOS haben gemeinsam einen Anteil von über 50 Prozent. Aus dieser 
Anforderung ergaben sich drei verschiedene Möglichkeiten zur Entwicklung:
\\Implementierung als WebApp
Bei dieser Art von Programm handelt es sich um eine Webseite, welche für mobile 
Geräte optimiert ist.
\\Implementierung des Programm als native App
Bei einer nativen App handelt es sich um ein Programm welches speziell für ein mobiles Betriebssystem entwickelt wurde.
\\Implementierung als HybridApp
Eine HybridApp ermöglicht es mit einem Quellcode mehrere App's erstellen zu lassen. 
Zur Verwendung kommen dabei Web-Technologien.

Diese drei Möglichkeiten sollen im folgenden Abschnitt anhand von definierten 
Kriterien bewertet werden.


Folgende Kriterien wurden für die Auswahl einer Methode betrachtet:
\begin{enumerate}
\item \underline{Zugriff auf Hardware des mobil Telefons}
\\Zur Implementierung einer LBS Applikation wird der eigene Standort benötigt. Um 
diesen zu bestimmen gibt es mehrere Verfahren (siehe Kapitel Standohrbestimmung). 
Die Informationen welche dafür benötigt werden, sind über die Hardware des 
Smartphones erreichbar. Beispielsweise kann der Standort über den eingebauten GPS-
Empfänger bestimmt werden. Für die Implementierung der App ist es von Nöten, dass 
diese Informationen ausgelesen werden können.

\item \underline{Voraussetzungen und Vorkenntnisse}
Da diese Studienarbeit innerhalb von wenigen Monaten entstanden ist und andere Projekte 
parallel bearbeitet werden mussten, ist ein Kriterium über welche Vorkenntnisse die 
Entwickler verfügen. Dieses Kriterium betrachtet die eingesetzten 
Programmiersprachen und technischen Geräte welche benötigt werden um eine LBS-App 
entwickeln zu können.


\item \underline{Aufwand}
Dieses Kriterium ergänzt das vorhergehende. Lässt sich aber auch klar abgrenzen. Da 
die Zeit für diese Studienarbeit begrenzt ist, darf die Implementierung nicht zu 
viel Zeit in Anspruch nehmen, da sonst die Anforderungen nicht umgesetzt werden 
können. Betrachtet wird hierbei wie viel Aufwand es ist die Anforderungen zu 
Implementieren und die App betriebssystemunabhängig zu Entwickeln.
\end{enumerate}

\textbf{\underline{WebApp}}\\
Bei einer WebApp (Webapplikation) handelt es sich um eine Anwendung welche im 
Browser ausgeführt wird. Eine für Smartphones optimierte WebApp fokussiert sich 
darauf, die Darstellung für kleine Bildschirme zu optimieren. Auch wird darauf 
geachtet, dass diese mit einem Touchscreen bedient werden kann. Ziel ist es, dass 
der Benutzer kaum einen Unterschied zu einer Nativen App erkennt. Berechnungen 
werden bei dieser Variante meist serverseitig durchgeführt. 

\begin{enumerate}
\item Kriterium 1: Zugriff auf Hardware Komponenten

Ein Nachteil der Webapplikation ist, dass es keine Standard-Hardwareschnittstellen 
für eine Browser-Anwendung gibt. Das Bedeutetet, eine WebApp kann nicht auf die 
Hardware zugreifen. Beispielsweise eine Standortbestimmung über GPS  oder der 
Zugriff auf ein Bluetooth Modul ist nicht möglich.

\item Kriterium 2: Voraussetzungen und Vorkenntnisse

Da es sich um eine Webseite handelt, kommen die bekannten Technologien zur 
Entwicklung zum Einsatz. Hierzu zählen:HTML Hypertext Markup Language, Casscading 
Stylesheets und JavaScript.

Durch die an der dualen Hochschule erworbenen Kenntnisse in den Vorlesungen Web 
Engineering und Software Engineering, sind erweiterte Vorkenntnisse über diese 
Technologien von allen Entwicklern dieser Arbeit vorhanden und stellen kein Problem 
dar. Zur Entwicklung reicht ein Editor sowie ein Internetbrowser. 

\item Kriterium 3: Aufwand

Betrachtet man die aufgezählten Technologien und Werkzeuge, so ist der Aufwand für 
die Entwicklung einer LBS- WebApp gering. Auch die Plattformunabhängigkeit stellt 
für eine WebApp keine Schwierigkeiten dar, da die genannten Web Technologien 
standardisiert sind. Allerdings fehlen definierte Schnittstellen für die Hardware 
Ansteuerung. Der Aufwand eine Schnittstelle zu entwickeln würde den Rahmen dieser 
Studienarbeit überschreiten. Selbst wenn eine Schnittstellen Implementierung 
gelingt, so wäre diese nicht geräte- und damit plattformunabhängig.
\end{enumerate}

http://www.sepia.de/webanwendungen-vs-mobile-apps.html

http://www.smart-digits.com/2012/02/native-app-oder-web-app-teil-1-definitionen-
und-entscheidungskriterien/



\textbf{\underline{Native App}}\\
Bei nativen Apps handelt es sich um Programme, welche für ein spezifisches mobiles 
Betriebssystem optimiert und lauffähig sind. Eine Ausführung auf einem Computer oder anderem 
Betriebssystem ist wenn überhaupt nur schwer umsetzbar.
Installiert werden kann dies über einen betriebssystemabhängigen Marktplatz. Wie 
bereits in der Anforderungen erwähnt, soll die Applikation auf iOS und Android 
Geräten verfügbar sein, weshalb die zu untersuchenden Kriterien für beide 
Betriebssysteme betrachtet werden.

\begin{enumerate}
\item Kriterium 1: Zugriff auf Hardware Komponenten
Sowohl Android wie auch iOS unterstützen einen Zugriff auf die Hardware. 
Dieser erfolgt über APIs (Applikation Programming Interface) und bietet alle mit 
dem Gerät zur Verfügung stehenden Funktionalitäten an.

\item Kriterium 2: Voraussetzungen und Vorkenntnisse

Android Entwicklung:
Die Programmiersprache für native Android Apps ist Java. Durch die Vorlesung Java 
Programmierung sind erweiterte Kenntnisse vorhanden. Zur komfortablen Entwicklung 
werden eine Entwicklungsumgebung (z.B. Eclipse), das aktuelle Java SDK (Software 
Development Kit) und Android SDK benötigt. Alle diese Komponenten sind kostenfrei 
verfügbar.

iOS Entwicklung:
Die Programmiersprache für native iOS Apps ist Objective-C. Zwar sind Kenntnisse 
über die Sprache C von zwei Entwicklern vorhanden, allerdings ist die Sprach C nur 
bedingt mit Objective-C vergleichbar. Es sind auf Grund dessen nur minimale 
Kenntnisse vorhanden.

Zur Implementierung einer iOS App wird neben einem Apple Computer diverse Software 
benötigt. Hierzu zählt die Entwicklungsumgebung Xcode. Möchte man die App auf einem 
Gerät Testen, so wird ein Apple Developer Account sowie das IOS Developer Programm benötigt, 
dieses ist Kostenpflichtig.



\item Kriterium 3: Aufwand

Möchte man eine App für beide Betriebssysteme erstellen, so muss jede App einzeln 
geschrieben werden. Es kann kein Code wiederverwendet werden, da sich die 
Programmiersprachen unterscheiden. Ebenfalls sind andere APIs vorhanden, was die 
Entwicklung erschwert. Der Aufwand ist hierbei so hoch wie für zwei Apps. 
\end{enumerate}

\textbf{\underline{Hybrid App}}\\
Eine Definition laut Duden für den Begriff Hybrid lautet gemischt. Dies ist auch bei solchen Apps der Fall. Mit bekannten Web-Technologien wird der Code für die Apps geschrieben. Ein Framework übernimmt im Anschluss daran, die Generierung der nativen Apps.  
\begin{enumerate}
\item Kriterium 1: Zugriff auf Hardware Komponenten

Es gibt verschiedene Frameworks um eine Hybride App zu entwickeln, deshalb kann man nicht pauschal sagen welche Zugriffe auf Hardware Komponenten möglich sind. Allerdings bieten bekannte Frameworks wie: Angular UI, Intel XDK oder Adobe Phonegab eine direkte Ansteuerung an Komponeten an. Hierzu zählen beispielsweise die Kamera, Kompass, Beschleunigungssenesor. Realisiert wird der Zugriff über APIs. Neben dem mitgelieferten APIs der Frameworks gibt es Plug-Ins welche von anderen Entwicklern zur Verfügung gestellt werden. Damit sind eine Vielzahl von Hardware Komponenten Zugreifbar mit Hybrid Apps.

\item Kriterium 2: Voraussetzungen und Vorkenntnisse

Entwickelt werden Hybrid Apps mit Web Technologien diese sind bereits bei Kriterium 2 von WebApps behandelt worden, ebenfalls die Vorkenntnisse.

Zu den Voraussetzungen zählt die Installation von Software. Ein Framework wird benötigt, diese unterscheiden sich in den bereitgestellten Funktionalitäten. Zur Entwicklung mit Web-Technologien wird mindestens ein Editor benötigt. Damit das Framework native Apps generieren kann, wird für die diversen Betriebssysteme SDKs benötigt. Außerdem ist es hilfreich ein Gerät pro Betriebssystem zu besitzen um die App zu testen. Ein andere Möglichkeit ist der Einsatz eines Emulators welcher ein Smartphone auf dem PC simuliert.

Alle diese Werkzeuge können kostenlos heruntergeladen werden.
TODO: klappt das mit Apple auch


\item Kriterium 3: Aufwand

Möchte man eine App für verschiedene Betriebssysteme entwickeln und den Aufwand gering halten, eignen sich dafür Hybrid Apps. Neben der eigentlichen Entwicklung ist es mit Aufwand verbunden alle Werkzeuge zu installieren und zu konfigurieren. Hat man diese Hürde geschafft ist der Aufwand mit gering zu bewerten. Ist die Implementierung abgeschlossen muss dem Framework mitgeteilt werden, welche Apps gebildet werden sollen und der rest funktioniert automatisch. Den Gesamt Aufwand für die Entwicklung einer Hybrid App ist niedrig bis mittel einzustufen.
\end{enumerate}

\textbf{\underline{Zusammenfassung und Fazit}}\\

%WebApp
%Vorkenntnisse vorhanden
%Aufwand ist gering
%Hardware nicht komplett unterstütz

%Native App
%sehr wenig vorkenntnisse was viel Zeit in anspruch nehemen würde
%Aufwand ist sehr hoch,weil man sich in zwei sprachen einarbeiten muss
 %Dafür volle hardware zur verfügung

%Hybrid app
%Vorkenntnisse vorhanden
%Hardware meist unterstützt ansosnten Plgu-Ins
 %Aufwand ist mittel bis gering

%Fazit IN dieser ARbeit wird eine Hybrid umgestezt. Da Unerfahren was Frameworks angeht und meiste entwicklung mit %Cordova und Plug ins  Wahl viel auf Apache Cordova mit Ionic

\underline{TODO: An dieser Stelle wird ein Zusammenfassung der Erkenntnisse sowie ein Fazit hinzugefügt. }\\
\underline{sowie ein Fazit hinzugefügt.}

\subsubsection{Phonegap und Apache Cordova}
PhoneGap entstand als Framework zur Entwicklung von Apps auf Basis von Web-Technologien wie HTML, CSS und JavaScript. 2011 wurde die Firma Nitobi Software, die PhoneGap einst entwickelte, von Adobe Systems aufgekauft welche das Produkt weiter unter dem Namen Apache Cordova fokussierten. 
\\
Im Rahmen der hier vorgestellten Arbeit wurde Cordova genutzt, um eine hybride App zu entwickeln. Da der Vorteil des Frameworks vor allem aus seiner Wiederverwendbarkeit besteht. Der geschriebene HTML-, CSS- und JavaScript-Code kann nämlich über Cordova entsprechend der verschiedenen Mobilplattformen unterschiedlich transformiert werden, um die entsprechende Applikation im richtigen Format zu erstellen. Unterstützt werden dabei die verbreitetsten Betriebssysteme Andorid und iOS, aber auch weitere wie Windows Phones, Blackberrys oder sogar FirefoxOS.

\subsubsection{Ionic}
Ein weiteres genutztes Framework ist Ionic. Es handelt sich dabei um ein HTML5-Framework, das sich um das Benutzerinterface einer Web-Applikation kümmert. Der Fokus des Frameworks liegt dabei speziell auf mobilen Endgeräten.
Ionic bietet, in Zusammenarbeit mit Angular JS, einige UI-Komponenten, die eine Oberfläche leicht in modernem Licht erscheinen lassen.

\subsubsection{HTML5}

Durch die Entscheidung für Cordova und Ionic ist die Verwendung von HTML5 vorgegeben. Um eine Hybride App über Cordova erstellen lassen zu können, müssen die Texte in HTML-Seiten beschrieben werden. Damit sie dann bei der Erstellung interpretiert werden können. In diesem Abschnitt wird die Technologie HTML5 im Allgemeinen erläutert.

HTML steht für Hypertext Markup Language (Übersetzt: Hypertext Auszeichnungssprache). Es handelt sich um eine textbasierte Auszeichnungssprache zur Strukturierung von Elementen auf einer Webseite. 
Über Tags werden Elemente differenziert und identifiziert. Für diverse Anwendungsfälle gibt es HTML-Tags wie beispielsweise: Überschriften, Absätze, Tabellen, Grafikelemente.
Diese Tags werden mit den Zeichen < und > umschlossen. Mit der Beschreibung <TagName> wird ein Tag geöffnet.  Die meisten geöffnete Tags müssen mit dem Element </TagName> geschlossen werden. 

HTML liegt aktuell in der 5. Version vor, weshalb der Name HTML5 gewählt wurde. Im Laufe der Zeit (1992- bis heute) wurden immer mehr Funktionen hinzugefügt. In den Anfängen von HTML war es nur möglich Text darzustellen. Mittlerweile gehören Bilder und Farben zum Standard, mit HTML5 können mittlerweile auch komplexe Animationen erstellt werden.  Durch die Standardisierung von HTML durch das W3C können nahezu alle Browser in HTML5 entwickelte Webseiten anzeigen. Diese Funktionalitäten werden für den Prototypen verwendet.



\subsubsection{CSS}
CSS steht für Cascading Style Sheets (gestufte Gestaltungsbögen). Es handelt sich um eine Gestaltungssprache welche unter anderen in Verbindung mit HTML genutzt wird. CSS werden genutzt um Design für Webseiten zu gestalten. Zu einem Design können mit CSS Farben, Formen, Schriftarten und vieles mehr gehören. Durch die Trennung von Text mit HTML und Design durch CSS ist es möglich mehrere Webseiten mit ähnlichem oder gleichen Design zu gestalten. Realisiert wird dies mit einer CSS-Datei. In einer CSS Datei sind meist mehrere Klassen vorhanden. Jede Klasse besitzt verschiedene Eigenschaften wie Farbe, Schriftart, Schriftgröße. Möchte man diese Klassen in einem HTML Dokument verwenden, so verknüpft man die CSS-Datei mit einem speziellen Tag  mit der HTML Seite und kann dann beispielsweise Textabschnitten oder Überschriften die definierten Klassen zuweisen.

http://www.w3.org/standards/webdesign/htmlcss

\subsubsection{Angular-JS}
Angular JS ist ein Framwork, das voll auf JavaScript aufbaut und komplett klientseitig ausgeführt wird.

\subsubsection{Kartenmaterial}
Kartenmaterial im Browser bzw. einer Hybrid-App ist ein essentieller Bestandteil von Location based Services. Durch eine Positionsbestimmung alleine erhält man nur Daten die für den Nutzer nicht anschaulich sind. Diese liegen normalerweise als geografische Koordinaten vor, die in geografischer Breite und geografischer Länge angegeben werden. Eine Beispielposition soll die Bedeutung von Kartenmaterial für den Nutzer von Location based Services verdeutlichen.

Als Beispiel hierfür wurde die Position der DHBW Mannheim in der Coblitzallee gewählt. Hierbei werden die geografischen Koordinaten, eine Adresse und ein Kartenausschnitt in einer Tabelle gegenübergestellt. Siehe hierzu Tabelle \ref{BedeutungVonKartenmaterial}.

\begin{table}[htbp]
\begin{center}
\begin{tabular}{|p{4.75cm}p{4.75cm}p{4.75cm}|} 
	\hline
		\rowcolor{black} \textcolor{white} { \textbf{Geographische Koordinaten} } & \textcolor{white}{\textbf{Adresse}} & \textcolor{white}{\textbf{Kartenausschnitt}}\\ 
		\rowcolor[gray]{.75}  49$^\circ$28'27.6\grqq N 8$^\circ$32'03.9\grqq E & Duale Hochschule Baden-Württemberg Mannheim \newline 
Coblitzallee 1-9 \newline 
68163 Mannheim \newline (Neuostheim) & Kartenausschnitt\newline 
\includegraphics[width=0.3\textwidth]{ref/images/KartenmaterialKlein.png} \\ 
\hline
	\end{tabular}
\end{center}
\caption{Bedeutung von Kartenmaterial} \label{BedeutungVonKartenmaterial}
\end{table}

In der Tabelle sind verschiedenen Ortsdaten zur Verfügung gestellt, die alle Vor- und Nachteile aufweisen.

Die Geographischen Koordinaten geben die Position am genausten an, sind aber für fast keine Nutzer einer App anschaulich und bieten deshalb keinen großen Nutzen. 

Die Adresse ist im Alltag am geläufigsten und somit für Nutzer am verständlichsten. Allerdings ist die Angabe nicht so genau, wie die Geographischen Koordinaten. Denn die Angabe Hausnummer 1-9 gibt einen relativ großen Bereich an.

Die Vorteile eines Kartenausschnitts sind, dass die Detaillierung vom Nutzer angepasst werden kann. Des Weiteren werden viele grafische Informationen angezeigt, wie zum Beispiel den eigene Standort, an denen sich ein Nutzer Orientieren kann. Der Nachteil dieser Variante ist, dass die Kartenausschnitte eine Abhängigkeit von externen Quellen und einem höheren Programmieraufwand mit sich bringen.


Auf Smartphones gehört Kartenmaterial und dessen Integration in Apps mittlerweile zum Standard, an welchen sich Nutzer gewöhnt haben. Und über die Hälfte der Deutschen, 44 Millionen nutzen schon ein Smartphone. Die Tendenz ist dabei steigend. Dies ist das Ergebnis einer Bitkom Studie. \cite{bitkom} Aus diesem Grund sollte auch Kartenmaterial in die Location based Services App integriert werden, welche die Autoren bei dieser Studienarbeit prototypisch entwickeln. 

Mögliche Quellen für das Kartenmaterial sind \glqq Google Maps\grqq, \glqq Bing Maps\grqq  und \glqq Open Street Maps\grqq.

Da Kartenmaterial eine zentrale Quelle der App darstellen wird ist die Auswahl eines Anbieters von großer Bedeutung. Aus diesem Grund wird hier eine genaue Analyse durchgeführt, welches Kartenmaterial sich am besten für diese App eignet.

\textbf{Anforderungen an das Kartenmaterial}

Die Anforderungen an interaktives Kartenmaterial bezüglich der in dieser Studienarbeit entwickelten App lassen sich in zwei Gruppen einteilen, die funktionalen und nichtfunktionalen Anforderungen.

Die \underline{nichtfunktionalen Anforderungen} sind:
\begin{enumerate}
\item Kostenlose Abfragen
\item Ohne Account nutzbar
\item Gute Dokumentation mit Codebeispielen
\end{enumerate}

Die \underline{funktionalen Anforderungen} an das interaktive Kartenmaterial sind:
\begin{enumerate}
\item JavaScript API
\item Unterstütze Browser
\item Eigenen Standort anzeigen
\item Markierungen auf der Karte setzen
\item Markierungen bündeln (optional)
\end{enumerate}

Bevor \glqq Google Maps\grqq, \glqq Bing Maps\grqq  und \glqq Open Street Map\grqq  bezüglich der Anforderungen untersucht werden, müssen diese genauer spezifiziert werden.

Zuerst widmen wir uns den nichtfunktionalen Anforderungen.
\begin{enumerate}
\item Kostenlose Abfragen \\
Da es sich bei der Implementierung um einen Prototypen für diese Studienarbeit handelt und dieser nicht kommerziell verwendet werden soll, sollen auch die Abfragen (map-loads) kostenlos sein. Zudem sollten genug kostenlose Abfragen zur Verfügung stehen. Bei 3 Entwicklern und Tests über die Dauer der Studienarbeit (8-9 Monate) darf das Kontingent der kostenlosen Abfragen nicht aufgebraucht sein.

\item Ohne Account nutzbar\\
Die Nutzung ohne Account vereinfacht den Einstieg für das Kartenmaterial und sollte deshalb gewährleistet sein. 
%Zudem würden dann alle Teammitglieder dieser Studienarbeit mit dem selben Account eines Teammitglieds arbeiten. 

\item Gute Dokumentation mit Codebeispielen\\
Eine gute Dokumentation der API des Kartenmaterials mit vielen Codebeispielen erleichtert den Einstieg deutlich. Da die Teammitglieder dieser Studienarbeit noch keine Erfahrung mit Kartenmaterial haben ist dies eine besonders wichtige Anforderung. 


\end{enumerate}



Als nächstes werden die funktionalen Anforderungen genauer erläutert.

\begin{enumerate}
\item JavaScript API\\
Eine JavaScript API ist essentiell wichtig, da der Prototyp mit HTML, CSS und Java Script entwickelt wird. 

\item Unterstütze Browser\\
Als unterstützte Browser sollten die Browser von den drei großen Smartphone-Betriebssystemen Android, IOS und Windows Phone unterstützt werden, um sich die Möglichkeit offen zu halten die prototypische App auch auf anderen Plattformen zu nutzen.

\item Eigenen Standort anzeigen\\
Der eigene Standort muss grafisch auf einer interaktiven Karte angezeigt werden. Das zentrieren des Kartenmaterials auf den eigenen Standort soll zudem möglich sein.

\item Markierungen auf der Karte setzen\\
Eigenen Markierungen müssen auf der Karte gesetzt werden könne. Dies muss grafisch erfolgen, denn es ist für den Prototypen besonders wichtig zu veranschaulichen, in welchem Bereich sich Ziele befinden. 

\item Markierungen bündeln (optional)\\
Markierungen auf der Karte sollten gebündelt werden, wenn der Zoom-Faktor zu klein wird. Dies soll der Übersichtlichkeit bei vielen Markierungen auf der Karte dienen. Hierbei soll der Radius, in dem Markierungen gebündelt werden eingestellt werden könne.

Diese Anforderung ist als optional gekennzeichnet, da eine Bündelung erst bei vielen Zielen zu Übersichtlichkeit nötig ist und zunächst einmal mit wenig Zielen entwickelt wird.

\end{enumerate}



\textbf{\underline{Google Maps}}\\
Seit 2005 gehört zu dem Produktportfolio von dem Suchmaschinenriesen Google ein Internet Kartendienst namens Google Maps. 
Er gehört zu den verbreitetsten und erfolgreichsten Internet Kartendiensten der Welt. \cite[Lexikon Google Maps]{itwissen}\cite[S.88]{gruber2015}

Zunächst wird Google Maps anhand der nichtfunktionalen Anforderungen bewertet, danach werden die funktionalen Anforderungen betrachtet.

\textbf{Nichtfunktionale Anforderungen}
\begin{enumerate}
\item Kostenlose Abfragen \\
Die Google Maps API steht generell als kostenloser Dienst zur Verfügung. Dieser darf in Webseiten, sowie mobile Apps eingebaut werden. Als Voraussetzung für die kostenlose Nutzung gilt allerdings, dass die eigene Webseite oder mobile App für alle Endnutzern kostenlos ist und öffentlich zugänglich sein muss.\\
Unter der kostenlosen Lizenz dürfen bis zu 25.000 Kartenladevorgänge pro Tag erfolgen. Ein Kartenladevorgang ist als Initiales Laden der Karte Definiert. Das bedeutet, dass Nutzerinteraktion mit der Karten nicht als erneuter Ladevorgang gewertet wird. 
In den Nutzungsbedingungen von Google wird darauf verwiesen, dass eine Sperre von mehr als 25.000 Abfragen pro Tag erst dann durchgeführt wird, wenn die Begrenzung mehr als 90 Tage in Folge überschritten werden sollte.
Diese Auslegung erscheint sehr nutzerfreundlich. Für diese Studienarbeit sollten die 25.000 Abfragen pro Tag in jedem Fall völlig ausreichen. \cite[Nutzungsbedingungen]{googlemaps}\cite[Lizenzierung]{googlemaps}


\item Ohne Account nutzbar\\
Seit dem die Google Maps JavaScript API in der Version 3 vorliegt ist die Nutzung ohne einen Schlüssel möglich. Das bedeutet, dass keine Registrierung bzw. Anmeldung zum nutzen nötig ist. Diese Praxis erleichtert es den Einstieg in Google Maps, da man sofort starten kann. \cite{googlemapsblog}


\item Gute Dokumentation mit Codebeispielen\\
Google Maps bietet ein Entwicklerhandbuch für die JavaScript API v3, dass sowohl ausführlich ist, als auch viele Beispiele bietet. Zudem ist das Benutzerhandbuch in deutsch abrufbar, was das erarbeiten und nachlesen vereinfacht. 
Zu dem ausführlichen Entwicklerhandbuch gibt es nochmals fast 150 Beispiele, zu denen die jeweils passende Output (Karte) angezeigt wird.\cite[Documentation]{googlemaps} \\
Neben der Dokumentation von Google selbst gibt es auch andere Tutorials im Netz. Eines davon ist von der Webseite www.w3schools.com, dass versucht von Grund auf eine Einführung in Google Maps zu geben. 



\end{enumerate}


\textbf{funktionale Anforderungen}
\begin{enumerate}
\item JavaScript API\\
Mit der Google Maps JavaScript API Version 3 bietet Google eine JavaScript API die sich sehr leicht in Webseiten integrieren lässt. 

Bei einer HTML-Webseite muss lediglich ein Script Tag eingefügt werden, in dem als Quelle (src) die Google Maps API zu finden ist. Vergleiche Listing Zeile 1. Danach können mit JavaScript Karten von Google Maps erstellt werden. Vergleiche Listing Zeile 2 - 12.
\begin{lstlisting}
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp"></script>
    <script>
		var map;
		function initialize() {
		  var mapOptions = {
		    zoom: 8,
		    center: new google.maps.LatLng(-34.397, 150.644)
		  };
		  map = new google.maps.Map(document.getElementById('map-canvas'),
	      mapOptions);
		}
		google.maps.event.addDomListener(window, 'load', initialize);
    </script>
\end{lstlisting} \cite[Codebeispiel Simple Map]{googlemaps}


\item Unterstütze Browser\\
Von der Google Maps JavaScript API 3 werden alle gängigen Browser unterstützt. Diese sind:

\glqq 
    IE 7.0 und höher (Windows)
    
    Firefox 3.0 und höher (Windows, Mac OS X und Linux)
    
    Safari 4 und höher (Mac OS X und iOS)
    
    Chrome (Windows, Mac OS X und Linux)
    
    Android
    
    BlackBerry 6
    
    Dolfin 2.0 und höher (Samsung Bada)
\grqq \cite{googlemaps}

Die offizielle Unterstützung des Windows Phone Internetexplorers fehlt hierbei.

\item Eigenen Standort anzeigen\\
Den eigenen Standort kann man, sofern dieser bestimmt werden konnte (Listing Zeile 1 - 5), mit der Google Maps API auf der Karte anzeigen. Dies kann man zum Beispiel mit einer Informationsbox, die man mit \glqq new google.maps.Infowindow \grqq auf dem eigenen Standort erstellt erfolgen. (Listing Zeile 7 - 11) Zur besseren Veranschaulichung wird die Karten dann noch auf die Eigene Position zentriert (Listing Zeile 13)

\begin{lstlisting}
  // Try HTML5 geolocation
  if(navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(function(position) {
      var pos = new google.maps.LatLng(position.coords.latitude,
                                       position.coords.longitude);

      var infowindow = new google.maps.InfoWindow({
        map: map,
        position: pos,
        content: 'Location found using HTML5.'
      });

      map.setCenter(pos);
    }
\end{lstlisting} \cite[Codebeispiel Geolocation]{googlemaps}

\item Markierungen auf der Karte setzen\\
Markierungen könne mit der API sehr leicht gesetzt werden. Neben der Position der Markierung muss noch eine Referenz auf die Google Maps Karte, sowie ein Name bei der Erstellung angegeben werden. Vergleiche Listing.

\begin{lstlisting}
  var marker = new google.maps.Marker({
      position: new google.maps.LatLng(-25.363882,131.044922),
      map: map,
      title: 'Hello World!'
  });

\end{lstlisting} \cite[Codebeispiel Simple Markers]{googlemaps}

Den Markierungen auf der Karte können allerdings auch Bilder mit dem Attribut \glqq icon \grqq zugeordnet werden. Des Weiteren kann man mit dem Attribut \glqq draggable \grqq einstellen, ob man die Markierung verschieben kann oder nicht.

\item Markierungen bündeln (optional)\\
Markierungen können in der Standard JavaScript API in Version 3 nicht gebündelt werden. 
Mit einer zusätzlichen Bibliothek  von Google kann dieser Funktionalität allerdings ergänzt werden. Die Bibliothek heißt \glqq google-maps-utility-library-v3 \grqq. 
Mit Hilfe dieser Bibliothek kann ein \glqq Markercluster \grqq erstellt werden, dass Markierungen bei einer gewissen Zoomstufe bündelt. Hierbei wird dem Markercluster ein Array der Markierungen, eine Refernz auf die Karte, sowie Markercluster-Einstellungen.
TODO: Formulierung an Listing anpassen ? markers anstatt Markierungen
\begin{lstlisting}
var mcOptions = {gridSize: 50, maxZoom: 15};
var markers = [...]; // Create the markers you want to add and collect them into a array.
var mc = new MarkerClusterer(map, markers, mcOptions);
\end{lstlisting}
\cite{googlecluster}

\end{enumerate}





\textbf{\underline{Bing Maps}}\\
Bing Maps ist der Kartendienst des Softwarekonzerns Microsoft. Neben Kartenmaterial bietet der Internet-basierte Dienst auch Satellitenbilder und Luftaufnahmen.

\textbf{Nichtfunktionale Anforderungen}
\begin{enumerate}
\item Kostenlose Abfragen \\
Bing Maps bietet für öffentlich zugängliche Webseiten, sowie für mobile Apps für Konsumenten ein kostenloses Kontingent von 125.000 Transaktionen pro Jahr. Will man dieses Kontingent von Transaktionen überschreiten, werden Kosten fällig.

\item Ohne Account nutzbar\\
Bing Maps ist nicht ohne einen Account nutzbar. Bevor man mit der dazugehörigen API entwickeln kann ist es nötig zuerst eine Microsoft ID anzulegen, mit der man dann wiederum einen Entwickler Key für Bing Maps anfordern kann. Ein schneller Einstieg ist auf Grund von Registrierungen nicht möglich. Zudem gibt es unterschiedliche Lizenzmodelle, die zwischen Webseite und mobile App unterscheiden, was zur Folge hat, dass man für eine neue Plattform einen neuen Key benötigt.

\item Gute Dokumentation mit Codebeispielen\\
Bing Maps bietet eine ausführliche Dokumentation für die Bing Maps AJAX Control Version 7.0. Dabei werden die Klassen beschrieben und fast jede mit einem Beispiel verdeutlicht. 
Zusätzlich gibt es über 200 Codebeispiele, die man direkt im Browser ausprobieren und editieren kann. Diese Beispiele kann man auch ohne Account (Key) nutzen.

\end{enumerate}



\textbf{funktionale Anforderungen}
\begin{enumerate}
\item JavaScript API\\
Bing Maps bietet eine JavaScript API, die \glqq Bing Maps AJAX Control Version 7.0 \grqq. Es ist möglich diese einfach in einem script-Tag in eine Webseite einzubinden (Listing Zeile 1). Danach kann man eine Karte erstellen indem man ein neues Map Objekt erzeugt. (Listing Zeile 6) 
\begin{lstlisting}
<script type="text/javascript" src="http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0"></script>
      <script type="text/javascript">
      var map = null;
      function getMap()
      {
          map = new Microsoft.Maps.Map(document.getElementById('myMap'), {credentials: 'Your Bing Maps Key'});
      }   
      </script>
\end{lstlisting} \cite[Codebeispiel CreateMap1]{bingmaps}


\item Unterstütze Browser\\
Die JavaScript API von Bing Maps wird laut Microsoft von fast allen Browsern unterstützt. 
Die unterstützen Desktop Browser sind:
\glqq
\begin{itemize}
\item Internet Explorer 7.0 and later
\item Firefox 3.6 and later
\item Safari 5 and later
\item Google Chrome
\end{itemize}

Die unterstützen mobilen Browser sind:
\begin{itemize}
\item Internet Explorer Mobile Browser
\item Apple iPhone Browser
\item Google Android Browser
\item Research in Motion (RIM) BlackBerry Browser
\end{itemize}
\grqq \cite{microsoftbrowser}

Alle relevanten Browser für Smartphone werden unterstützt.

\item Eigenen Standort anzeigen\\
Der Eigene Standort kann bei Bing Maps mit einem \glqq GeoLocationProvider \grqq ermittelt werden. Dieser erhält eine Referenz auf das Kartenobjekt, in dem der Standort angezeigt werden soll (Listing Zeile 2). Mit der Funktion \glqq getCurrentPosition \grqq kann dann der Standort des Nutzers ermittelt werden.
\begin{lstlisting}
map.entities.clear(); 
var geoLocationProvider = new Microsoft.Maps.GeoLocationProvider(map);  
geoLocationProvider.getCurrentPosition(); 
\end{lstlisting}\cite[Codebeispiel GetUserLocation1]{bingmaps}

\item Markierungen auf der Karte setzen\\
Mit Bing Maps ist es möglich Markierungen auf der Karte zu platzieren. Dieser werden bei hierbei PushPins genannt. Diese Pushpins werden an zum Anzeigen dem Map Objekt übergeben (Listing Zeile 3). Eine nachträgliche Positionsänderung der gesetzten Pushpins ist einfach möglich, indem man diesem eine neue Position zuweist (Listing Zeile 4).
\begin{lstlisting}
map.entities.clear(); 
var pushpin= new Microsoft.Maps.Pushpin(map.getCenter(), null); 
map.entities.push(pushpin); 
pushpin.setLocation(new Microsoft.Maps.Location(47.5, -122.33)); 
\end{lstlisting}\cite[Pushpins7]{bingmaps}

\item Markierungen bündeln (optional)\\
Microsoft bietet keine Funktion mit der man Markierungen(Pushpins) zusammenfassen kann. Um diese Funktionalität dennoch mit Bing Maps nutzen zu können kann man auf Code von Drittherstellen zurückgreifen. Dieser Code kann allerdings in einer neuen Version von Bing Maps unbrauchbar sein. Und eine Weiterentwicklung ist nicht sehr wahrscheinlich, da hinter den Drittherstellen meist nur eine Person steht. \cite[S. 92]{gruber2015}
\end{enumerate}


\textbf{\underline{Open Street Maps}}\\
Open Street Map ist die sogenannte \glqq offenste aller Karten \grqq \cite[S.92]{gruber2015}. Das bedeutet, dass das Kartenmaterial von der OpenStreetMap Foundation jedem frei und kostenlos zu Verfügung gestellt wird. Das Kartenmaterial selbst kann von jedem Nutzer überarbeitet werden oder es kann als Basis für neues Kartenmaterial dienen (Points of Interest). So steht es auch jedem frei Fehler zu finden und verbessertes Kartenmaterial einzureichen.

Mit Open Streetmap ist es sogar möglich seine eigenen Karten zu verwenden.

TODO: Hinweis auf Leaflet


\textbf{Nichtfunktionale Anforderungen}
\begin{enumerate}
\item Kostenlose Abfragen \\
Open Steet Map bietet jedem privaten oder Kommerziellen Nutzer die Möglichkeit auf das Kartenmaterial zuzugreifen. Abfragen sind dabei generell umsonst. Des Weiteren ist die Anzahl der Abfragen weder für einen Tag, noch für ein Jahr begrenzt.

\item Ohne Account nutzbar\\
TODO: Überprüfen!!!
Für die Nutzung von Open Street Map ist weder eine Registrierung, noch ein Account erforderlich. Nach der Angabe der Ressource im Script Tag (Leaflet API) einer Webseite kann mit JavaScript auf das Kartenmaterial von Open Street Map zugegriffen werden.

\item Gute Dokumentation mit Codebeispielen\\
Eine gute Dokumentation ist durch die Webseite von Leaflet gegeben. Alle Funktionen werden dort übersichtlich beschrieben, sowie anhand von Beispielen erläutert. 

Ein großer Vorteil der Dokumentation von Leaflet sind die Tutorials. Diese beschränken sich auf die wesentlichen Funktionen, wie beispielsweise die Nutzung von Leaflet unter mobilen Geräten. 

Bei schwierigen Aufgaben ist es durch Wiki-Beiträge nahezu immer diese zu lösen.


\end{enumerate}

\textbf{funktionale Anforderungen}
\begin{enumerate}
\item JavaScript API\\
Die OpenStreetMap Foundation selbst bietet nur Kartenmaterial an. Eine JavaScript API von der OpenStreetMap Foundation ist nicht vorhanden. Allerdings gibt es Bibliotheken, die von anderen Projekten veröffentlicht wurden, die diese Funktionalitäten abbilden. Die bekannteste dürfte \glqq Leaflet \grqq sein. Leaflet wird nämlich auch auf der Webseite von Open Steet Map, \glqq www.openstreetmap.org \grqq , genutzt.

Die API von Fremdprojekten haben zum Nachteil, dass nicht mehr alles aus einer Hand kommt.

\item Unterstütze Browser\\
Leaflet untersützt Browser nahezu alle Browser. Generell werden Browser unterstützt, die unter der HTML-Rendering-Engine WebKit laufen, was schon fast alle Browser abdeckt. Die unterstützten Browser sind im einzelnen:

\glqq 
On Desktop

    Chrome,
    
    Firefox,
    
    Safari 5+,
    
    Opera 12+,
    
    IE 7–11

On Mobile

    Safari for iOS 3–7+,
    
    Android browser 2.2+, 3.1+, 4+,
    
    Chrome for Android 4+ and iOS,
    
    Firefox for Android,
    
    Other WebKit browsers (webOS, Blackberry 7+, etc.),
    
    IE10/11 for Win8 devices
\grqq
\cite{leaflet}

Alle relevanten Browser von Smartphones werden unterstützt.

\item Eigenen Standort anzeigen\\
Der Eigene Standort lässt sich mit Leaflet mit einer einzigen Funktion bestimmen. Vergleiche hierzu Listing Zeile 17. 

Um den Standort anzuzeigen ist zunächst ein Kartenobjekt nötig. Dieses wird in Zeile 1 des Listings initialisiert. Um die eigene Position auf der Karte grafisch anzeigen zu können ist die Funktion \glqq onLocationFound  \grqq, im Listing Zeile 3 bis 8,  nötig. Diese Funktion wird aktiviert, wenn der eigene Standort gefunden wurde. Dann wird ein die Genauigkeit des Standorts ermittelt und grafisch über einen circle dargestellt (Zeile 4 und 7). Das Zentrum des Standorts wird durch einen Marker (Zeile 5) dargestellt.

Wenn der Standort nicht bestimmt werden konnte wird dem Nutzer mit der Funktion \glqq onLocationError \grqq eine Fehlermeldung angezeigt.

\begin{lstlisting} 
var map = L.map('map');

function onLocationFound(e) {
	var radius = e.accuracy / 2;
	L.marker(e.latlng).addTo(map)
		.bindPopup("You are within " + radius + " meters from this point").openPopup();
	L.circle(e.latlng, radius).addTo(map);
}

function onLocationError(e) {
	alert(e.message);
}

map.on('locationfound', onLocationFound);
map.on('locationerror', onLocationError);

map.locate({setView: true, maxZoom: 16});
\end{lstlisting}  \cite{leaflet}

Dieses Beispiel zeigt gut, wie die Leaflet JavaScript API aufgebaut ist. Hier ist alle Funktion separat und können einzeln genutzt werden. So kann man als Programmierer genau die Funktionalitäten nutzen, die man braucht. In diesem Beispiel ist es auch Möglich die Karte stets auf den eigenen Standort zu zentrieren und diesen nicht zusätzlich grafisch anzuzeigen.

\item Markierungen auf der Karte setzen\\
Markierungen können mit der Funktion \glqq marker(latitude, longitude) \grqq erstellt werden und der Karte hinzugefügt werden. Ein Beispiel dafür ist schon im Listing der Funktionalen Anforderung 3 in Zeile 5 bis 6 enthalten.

\item Markierungen bündeln (optional)\\
Mit LeafletJS lassen sich Marker nicht bündeln. Diese Funktionalität kann durch das einbinden eines weiteren Projekts, \glqq  Leaflet.markercluster \grqq ergänzt werden. \cite[S.92]{gruber2015}

Das Markercluster kann eine Sammlung von Markern auf der Karte gebündelt anzeigen. Die Marker können mit \glqq .addLayer() \grqq zum Markercluster hinzugefügt werden. Dieses wird wiederum als Layer zur Karte hinzugefügt. (Listing Zeile 6)

\begin{lstlisting}
var markers = new L.MarkerClusterGroup();

markers.addLayer(L.marker([175.3107, -37.7784]));
// add more markers here...

map.addLayer(markers);
\end{lstlisting} \cite{leaflet}

\end{enumerate}


\textbf{\underline{Fazit Kartenmaterial}}\\
Um ein Fazit zu ziehen, welches Kartenmaterial zum Einsatz in der Location-based Services App kommt, wird hierbei zuerst auf die Vor und Nachteile der einzelnen Anbieter eingegangen.

Google:

Vorteile:
Alles aus einer Hand
Keine Registrierung nötig
Gute und ausführliche Dokumentation mit vielen Beispielen

Nachteile:
Lizenzkosten fallen an, wenn 25000 Abfragen pro Tag häufig überschritten werden
Der Internetexplorer für Windows Phone wird offiziell nicht unterstützt

Bing:

Vorteile:
Gute und ausführliche Dokumentation mit vielen Beispielen
Untersützte Browser

Nachteile:
Cluster nur mit externer Bibliothek nutzbar
Registrierung und unterschiedliche Lizenzmodelle für Web und mobile
Anzahl der kostenlosen Abfragen ist sehr begrenzt


Open Street Map:

Vorteile:
Unbegrenzt viele kostenlose Abfragen
Individualisierbarkeit(eigenes Kartenmaterial)
Unterstützte Browser
Gute und ausführliche Dokumentation mit vielen Beispielen
API Struktur

Nachteile:
Man ist auf 3 Hersteller bzw. Quellen angewiesen


Bewertung der nichtfunktionale Anforderungen:
\begin{enumerate}
\item Kostenlose Abfragen: \\
OpenStreetMap bietet unlimitiert viele kostenlose Abfragen und kann damit überzeugen.
\item Ohne Account nutzbar: \\
OpenStreetMap kann generell ohne Account genutzt werden.
\item Gute Dokumentation mit Codebeispielen:\\
Alle drei Anbieter bieten ausführliche Dokumentationen mit Tutorials an.
\end{enumerate}

Bei den nichtfunktionalen Anforderungen schneidet Open Steet Maps am besten ab. 

Bewertung der funktionalen Anforderungen:
\begin{enumerate}
\item JavaScript API:\\
Alle Anbieter bieten eine JavaScript API und überzeugen damit. Die Kapselung der Funktionen von OpenStreetMap scheint aber für die Autoren am sinnvollsten gewählt zu sein.
\item Unterstützte Browser:\\
Google Maps unterstützt den Internet Explorer für Windows Phone Geräte offiziell nicht. Bing Maps und OpenStreetMap können mit den unterstützten Browsern überzeugen.
\item Eigenen Standort anzeigen:\\
Alle drei Anbieter überzeugen hierbei gleichermaßen.
\item Markierungen auf der Karte setzen:\\
Auch hierbei überzeugen alle drei Anbieter gleichermaßen.
\item Markierungen bündeln:\\
Google Maps liefert alles aus einer Hand sowohl bei Bing Maps, als auch bei OpenStreetMap muss auf Bibliotheken dritter zurückgegriffen werden.
\end{enumerate}

Durch die fehlende offizielle Unterstützung von Google Maps für den Windows Phone Browser ist es nicht für diese Studienarbeit geeignet eine plattformübergreifende mobile LBS App zu entwickeln.

Im Vergleich der Vor und Nachteile und den nichtfunktionalen Anforderungen überzeugt OpenStreetMaps bei den gewählten Anforderungen deutlich mehr als Bing Maps.

Das Fazit ist, dass sich OpenStreetMaps am besten für den Einsatzzweck dieser Studienarbeit und der damit verbundenen Location-based Services App eignet.